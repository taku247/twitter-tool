# ChatGPTåˆ†æãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆæ›¸

## ğŸ“ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆæ–¹é‡

### åŸºæœ¬åŸå‰‡
1. **ç°¡æ½”æ€§**: çµæœã¯èª­ã¿ã‚„ã™ãã€è¦ç‚¹ã‚’çµã‚‹
2. **ä¸€è²«æ€§**: åˆ†æã‚¿ã‚¤ãƒ—ã”ã¨ã«çµ±ä¸€ã•ã‚ŒãŸãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
3. **å®Ÿç”¨æ€§**: ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤ã®ã‚ã‚‹æ´å¯Ÿã‚’æä¾›
4. **æ—¥æœ¬èªå¯¾å¿œ**: æ—¥æœ¬èªãƒ„ã‚¤ãƒ¼ãƒˆã«æœ€é©åŒ–
5. **æ§‹é€ åŒ–**: ãƒ‘ãƒ¼ã‚¹ã—ã‚„ã™ã„æ§‹é€ åŒ–ã•ã‚ŒãŸå‡ºåŠ›

### å‡ºåŠ›å½¢å¼
- **ãƒ†ã‚­ã‚¹ãƒˆå½¢å¼**: Markdownå½¢å¼ã§äººé–“ãŒèª­ã¿ã‚„ã™ã
- **JSONå½¢å¼**: ãƒ—ãƒ­ã‚°ãƒ©ãƒ å‡¦ç†ç”¨ã®æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿
- **ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰**: Markdown + JSONåŸ‹ã‚è¾¼ã¿

---

## ğŸ¯ åˆ†æã‚¿ã‚¤ãƒ—åˆ¥ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

### 1. daily_summary (æ—¥æ¬¡è¦ç´„)

#### ç›®çš„
1æ—¥åˆ†ã®ãƒ„ã‚¤ãƒ¼ãƒˆã‹ã‚‰ä¸»è¦ãªãƒˆãƒ”ãƒƒã‚¯ã¨å‚¾å‘ã‚’æŠ½å‡ºã—ã€ç°¡æ½”ã«è¦ç´„ã™ã‚‹

#### ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆ
```javascript
const DAILY_SUMMARY_PROMPT = {
    system: `ã‚ãªãŸã¯Twitterãƒ‡ãƒ¼ã‚¿ã®åˆ†æå°‚é–€å®¶ã§ã™ã€‚ä¸ãˆã‚‰ã‚ŒãŸãƒ„ã‚¤ãƒ¼ãƒˆã‹ã‚‰é‡è¦ãªæƒ…å ±ã‚’æŠ½å‡ºã—ã€ãƒ“ã‚¸ãƒã‚¹ã«å½¹ç«‹ã¤æ´å¯Ÿã‚’æä¾›ã—ã¦ãã ã•ã„ã€‚
    
å‡ºåŠ›ã¯å¿…ãšä»¥ä¸‹ã®æ§‹é€ ã«å¾“ã£ã¦ãã ã•ã„ï¼š
- ç°¡æ½”ã§èª­ã¿ã‚„ã™ã„æ—¥æœ¬èª
- å…·ä½“çš„ãªäº‹ä¾‹ã®å¼•ç”¨
- å®¢è¦³çš„ã§åã‚Šã®ãªã„åˆ†æ`,

    template: `ä»¥ä¸‹ã®{count}ä»¶ã®ãƒ„ã‚¤ãƒ¼ãƒˆã‹ã‚‰ã€æœ¬æ—¥ã®ä¸»è¦ãƒˆãƒ”ãƒƒã‚¯ã¨é‡è¦ãªå‚¾å‘ã‚’åˆ†æã—ã¦ãã ã•ã„ã€‚

## åˆ†æå¯¾è±¡
- æœŸé–“: {dateRange}
- ãƒ„ã‚¤ãƒ¼ãƒˆæ•°: {count}ä»¶
- ãƒªã‚¹ãƒˆ: {listName}

## å‡ºåŠ›å½¢å¼
### ğŸ“Š ä¸»è¦ãƒˆãƒ”ãƒƒã‚¯ï¼ˆä¸Šä½3ã¤ï¼‰
1. **[ãƒˆãƒ”ãƒƒã‚¯å]**: [2-3è¡Œã®èª¬æ˜]
2. **[ãƒˆãƒ”ãƒƒã‚¯å]**: [2-3è¡Œã®èª¬æ˜]  
3. **[ãƒˆãƒ”ãƒƒã‚¯å]**: [2-3è¡Œã®èª¬æ˜]

### ğŸ”¥ æ³¨ç›®ãƒ„ã‚¤ãƒ¼ãƒˆ
> [æœ€ã‚‚é‡è¦/å½±éŸ¿åŠ›ã®ã‚ã‚‹ãƒ„ã‚¤ãƒ¼ãƒˆã‚’1ã¤å¼•ç”¨]
> æŠ•ç¨¿è€…: @[username]

### ğŸ“ˆ å‚¾å‘åˆ†æ
- **å…¨ä½“ã®å‚¾å‘**: [ãƒã‚¸ãƒ†ã‚£ãƒ–/ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ©ãƒ«/ãƒã‚¬ãƒ†ã‚£ãƒ–ãªå‚¾å‘]
- **è­°è«–ã®æ´»ç™ºåº¦**: [é«˜/ä¸­/ä½]
- **æ–°ã—ã„è©±é¡Œ**: [æ–°è¦ã«å‡ºç¾ã—ãŸãƒˆãƒ”ãƒƒã‚¯ã®æœ‰ç„¡]

### ğŸ’¡ æ³¨ç›®ã™ã¹ãç‚¹
[ãƒ“ã‚¸ãƒã‚¹ã‚„æŠ€è¡“ãƒˆãƒ¬ãƒ³ãƒ‰ã¨ã—ã¦é‡è¦ãªæ´å¯Ÿã‚’1-2è¡Œ]

---
## ãƒ„ã‚¤ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿
{tweets}`
};
```

#### å‡ºåŠ›ä¾‹
```markdown
### ğŸ“Š ä¸»è¦ãƒˆãƒ”ãƒƒã‚¯ï¼ˆä¸Šä½3ã¤ï¼‰
1. **AIã‚¬ãƒãƒŠãƒ³ã‚¹**: ä¼æ¥­ã§ã®AIå°å…¥æ™‚ã®å€«ç†æŒ‡é‡ã‚„ã‚¬ãƒãƒŠãƒ³ã‚¹ä½“åˆ¶ã«é–¢ã™ã‚‹è­°è«–ãŒæ´»ç™ºåŒ–ã€‚ç‰¹ã«é‡‘èæ¥­ç•Œã§ã®äº‹ä¾‹ãŒå¤šæ•°å…±æœ‰ã•ã‚ŒãŸã€‚
2. **LLMæœ€é©åŒ–**: å¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«ã®æ¨è«–ã‚³ã‚¹ãƒˆå‰Šæ¸›æ‰‹æ³•ã«ã¤ã„ã¦ã€é‡å­åŒ–ã‚„ãƒ—ãƒ«ãƒ¼ãƒ‹ãƒ³ã‚°æŠ€è¡“ã®å®Ÿè£…äº‹ä¾‹ãŒæ³¨ç›®ã‚’é›†ã‚ãŸã€‚
3. **ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹AI**: Metaç¤¾ã®Llama3ç³»ãƒ¢ãƒ‡ãƒ«ã®ãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°äº‹ä¾‹ã¨ã€å•†ç”¨åˆ©ç”¨æ™‚ã®æ³¨æ„ç‚¹ã«ã¤ã„ã¦æ´»ç™ºãªæ„è¦‹äº¤æ›ã€‚

### ğŸ”¥ æ³¨ç›®ãƒ„ã‚¤ãƒ¼ãƒˆ
> "æˆ‘ã€…ã®é‡‘èæ©Ÿé–¢ã§ã¯ã€AIæ„æ€æ±ºå®šã®èª¬æ˜å¯èƒ½æ€§ã‚’é‡è¦–ã—ã€å…¨ã¦ã®ãƒ¢ãƒ‡ãƒ«åˆ¤å®šã«å¯¾ã—ã¦ãƒªã‚¹ã‚¯ã‚¹ã‚³ã‚¢ã¨æ ¹æ‹ ã‚’ä½µè¨˜ã™ã‚‹ä»•çµ„ã¿ã‚’å°å…¥ã—ã¾ã—ãŸã€‚è¦åˆ¶å¯¾å¿œã ã‘ã§ãªãã€é¡§å®¢ä¿¡é ¼ã®å‘ä¸Šã«ã‚‚ã¤ãªãŒã£ã¦ã„ã¾ã™ã€‚"
> æŠ•ç¨¿è€…: @fintech_expert

### ğŸ“ˆ å‚¾å‘åˆ†æ
- **å…¨ä½“ã®å‚¾å‘**: ãƒã‚¸ãƒ†ã‚£ãƒ–ï¼ˆæŠ€è¡“é€²æ­©ã¸ã®æœŸå¾…æ„ŸãŒå¼·ã„ï¼‰
- **è­°è«–ã®æ´»ç™ºåº¦**: é«˜ï¼ˆãƒªãƒ—ãƒ©ã‚¤ã‚„RTãŒå¹³å‡ã®1.5å€ï¼‰
- **æ–°ã—ã„è©±é¡Œ**: AIè¦åˆ¶æ³•æ¡ˆã®å…·ä½“çš„ãªå®Ÿè£…ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã«ã¤ã„ã¦

### ğŸ’¡ æ³¨ç›®ã™ã¹ãç‚¹
ä¼æ¥­ã§ã®AIå°å…¥ãŒã€Œå®Ÿé¨“æ®µéšã€ã‹ã‚‰ã€Œæœ¬æ ¼é‹ç”¨ãƒ»ã‚¬ãƒãƒŠãƒ³ã‚¹æ®µéšã€ã«ç§»è¡Œã—ã¦ã„ã‚‹ã€‚ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹å¯¾å¿œãŒãƒ“ã‚¸ãƒã‚¹è¦ä»¶ã¨ã—ã¦æ˜ç¢ºã«å®šç¾©ã•ã‚Œã¤ã¤ã‚ã‚‹ã€‚
```

### 2. sentiment_trend (æ„Ÿæƒ…åˆ†æ)

#### ç›®çš„
ãƒ„ã‚¤ãƒ¼ãƒˆã®æ„Ÿæƒ…çš„å‚¾å‘ã‚’å®šé‡åˆ†æã—ã€ãƒã‚¸ãƒ†ã‚£ãƒ–/ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ©ãƒ«/ãƒã‚¬ãƒ†ã‚£ãƒ–ã®åˆ†å¸ƒã¨ä¸»è¦ãªæ„Ÿæƒ…ã‚’ç‰¹å®š

#### ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆ
```javascript
const SENTIMENT_TREND_PROMPT = {
    system: `ã‚ãªãŸã¯æ„Ÿæƒ…åˆ†æã®å°‚é–€å®¶ã§ã™ã€‚æ—¥æœ¬èªãƒ„ã‚¤ãƒ¼ãƒˆã‹ã‚‰æ­£ç¢ºãªæ„Ÿæƒ…ã‚’èª­ã¿å–ã‚Šã€å®šé‡çš„ãªåˆ†æã‚’è¡Œã£ã¦ãã ã•ã„ã€‚
    
åˆ†æã®æ³¨æ„ç‚¹ï¼š
- çš®è‚‰ã‚„æš—ç¤ºçš„ãªè¡¨ç¾ã‚‚è€ƒæ…®
- æ–‡è„ˆã‚’é‡è¦–ã—ãŸæ„Ÿæƒ…åˆ¤å®š
- æ—¥æœ¬èªç‰¹æœ‰ã®è¡¨ç¾ï¼ˆæ•¬èªã€æ›–æ˜§è¡¨ç¾ï¼‰ã¸ã®é…æ…®`,

    template: `ä»¥ä¸‹ã®{count}ä»¶ã®ãƒ„ã‚¤ãƒ¼ãƒˆã®æ„Ÿæƒ…åˆ†æã‚’è¡Œã„ã€çµæœã‚’JSONå½¢å¼ã§å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚

## åˆ†æè¦ä»¶
- å„ãƒ„ã‚¤ãƒ¼ãƒˆã‚’å€‹åˆ¥ã«æ„Ÿæƒ…åˆ†æ
- å…¨ä½“çš„ãªæ„Ÿæƒ…åˆ†å¸ƒã‚’ç®—å‡º
- ä¸»è¦ãªæ„Ÿæƒ…ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’æŠ½å‡º
- æ„Ÿæƒ…å¤‰åŒ–ã®å‚¾å‘ã‚’åˆ†æ

## å‡ºåŠ›å½¢å¼
æ„Ÿæƒ…åˆ†æçµæœã‚’ä»¥ä¸‹ã®JSONå½¢å¼ã§å‡ºåŠ›ã—ã¦ãã ã•ã„ï¼š

\`\`\`json
{
  "sentiment_distribution": {
    "positive": 0.0,
    "neutral": 0.0,
    "negative": 0.0
  },
  "key_emotions": [
    "emotion1", "emotion2", "emotion3"
  ],
  "emotional_keywords": {
    "positive": ["ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰1", "ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰2"],
    "negative": ["ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰1", "ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰2"]
  },
  "sentiment_summary": "å…¨ä½“çš„ãªæ„Ÿæƒ…å‚¾å‘ã®èª¬æ˜",
  "notable_patterns": [
    "æ„Ÿæƒ…ãƒ‘ã‚¿ãƒ¼ãƒ³1ã®èª¬æ˜",
    "æ„Ÿæƒ…ãƒ‘ã‚¿ãƒ¼ãƒ³2ã®èª¬æ˜"
  ]
}
\`\`\`

---
## ãƒ„ã‚¤ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿
{tweets}`
};
```

#### å‡ºåŠ›ä¾‹
```json
{
  "sentiment_distribution": {
    "positive": 0.65,
    "neutral": 0.25,
    "negative": 0.10
  },
  "key_emotions": [
    "æœŸå¾…æ„Ÿ", "èˆˆå¥®", "ä¸å®‰"
  ],
  "emotional_keywords": {
    "positive": ["ç´ æ™´ã‚‰ã—ã„", "æœŸå¾…", "é©æ–°çš„", "åŠ¹ç‡åŒ–"],
    "negative": ["å¿ƒé…", "ãƒªã‚¹ã‚¯", "èª²é¡Œ", "æ‡¸å¿µ"]
  },
  "sentiment_summary": "å…¨ä½“çš„ã«ãƒã‚¸ãƒ†ã‚£ãƒ–ãªå‚¾å‘ã€‚AIæŠ€è¡“ã¸ã®æœŸå¾…æ„ŸãŒå¼·ã„ä¸€æ–¹ã§ã€å°å…¥æ™‚ã®ãƒªã‚¹ã‚¯ã«å¯¾ã™ã‚‹æ…é‡ãªæ„è¦‹ã‚‚è¦‹ã‚‰ã‚Œã‚‹ã€‚",
  "notable_patterns": [
    "æŠ€è¡“ç³»ã®æŠ•ç¨¿è€…ã»ã©ãƒã‚¸ãƒ†ã‚£ãƒ–ãªå‚¾å‘",
    "è¦åˆ¶ã‚„å€«ç†ã«é–¢ã™ã‚‹è©±é¡Œã§ã¯ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ©ãƒ«ã€œãƒã‚¬ãƒ†ã‚£ãƒ–",
    "å…·ä½“çš„ãªæˆæœäº‹ä¾‹ã®å…±æœ‰æ™‚ã«å¼·ã„ãƒã‚¸ãƒ†ã‚£ãƒ–åå¿œ"
  ]
}
```

### 3. topic_analysis (ãƒˆãƒ”ãƒƒã‚¯åˆ†æ)

#### ç›®çš„
ãƒ„ã‚¤ãƒ¼ãƒˆã‹ã‚‰é‡è¦ãªãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ãƒˆãƒ¬ãƒ³ãƒ‰ã‚’æŠ½å‡ºã—ã€é‡è¦åº¦ã¨ãƒ“ã‚¸ãƒã‚¹ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆã§ãƒ©ãƒ³ã‚­ãƒ³ã‚°

#### ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆ
```javascript
const TOPIC_ANALYSIS_PROMPT = {
    system: `ã‚ãªãŸã¯ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ãƒˆãƒ¬ãƒ³ãƒ‰ã®åˆ†æå°‚é–€å®¶ã§ã™ã€‚ãƒ„ã‚¤ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿ã‹ã‚‰é‡è¦ãªæŠ€è¡“ãƒˆãƒ¬ãƒ³ãƒ‰ã‚’ç‰¹å®šã—ã€ãƒ“ã‚¸ãƒã‚¹ã¸ã®å½±éŸ¿åº¦ã‚’è©•ä¾¡ã—ã¦ãã ã•ã„ã€‚
    
åˆ†æè¦³ç‚¹ï¼š
- æŠ€è¡“ã®æˆç†Ÿåº¦
- å¸‚å ´ã¸ã®å½±éŸ¿åº¦
- è­°è«–ã®æ´»ç™ºã•
- å®Ÿç”¨åŒ–ã®å¯èƒ½æ€§`,

    template: `ä»¥ä¸‹ã®{count}ä»¶ã®ãƒ„ã‚¤ãƒ¼ãƒˆã‹ã‚‰ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ãƒˆãƒ¬ãƒ³ãƒ‰ã‚’åˆ†æã—ã€é‡è¦åº¦é †ã«ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã—ã¦ãã ã•ã„ã€‚

## åˆ†æå¯¾è±¡
- æœŸé–“: {dateRange}
- ãƒ„ã‚¤ãƒ¼ãƒˆæ•°: {count}ä»¶
- åˆ†æè¦³ç‚¹: æŠ€è¡“ãƒˆãƒ¬ãƒ³ãƒ‰ã€å¸‚å ´å½±éŸ¿ã€å®Ÿç”¨æ€§

## å‡ºåŠ›å½¢å¼
### ğŸ† é‡è¦ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ©ãƒ³ã‚­ãƒ³ã‚°

#### 1ä½: [æŠ€è¡“/ãƒˆãƒ¬ãƒ³ãƒ‰å]
- **è¨€åŠæ•°**: Xä»¶
- **é‡è¦åº¦**: â­â­â­â­â­
- **ãƒ“ã‚¸ãƒã‚¹ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ**: [é«˜/ä¸­/ä½]
- **æ¦‚è¦**: [2-3è¡Œã®èª¬æ˜]
- **ä»£è¡¨çš„ãªè­°è«–**: "[å…·ä½“çš„ãªæŠ•ç¨¿ã®å¼•ç”¨]"

#### 2ä½: [æŠ€è¡“/ãƒˆãƒ¬ãƒ³ãƒ‰å]
- **è¨€åŠæ•°**: Xä»¶  
- **é‡è¦åº¦**: â­â­â­â­
- **ãƒ“ã‚¸ãƒã‚¹ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ**: [é«˜/ä¸­/ä½]
- **æ¦‚è¦**: [2-3è¡Œã®èª¬æ˜]
- **ä»£è¡¨çš„ãªè­°è«–**: "[å…·ä½“çš„ãªæŠ•ç¨¿ã®å¼•ç”¨]"

#### 3ä½: [æŠ€è¡“/ãƒˆãƒ¬ãƒ³ãƒ‰å]
- **è¨€åŠæ•°**: Xä»¶
- **é‡è¦åº¦**: â­â­â­
- **ãƒ“ã‚¸ãƒã‚¹ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ**: [é«˜/ä¸­/ä½] 
- **æ¦‚è¦**: [2-3è¡Œã®èª¬æ˜]
- **ä»£è¡¨çš„ãªè­°è«–**: "[å…·ä½“çš„ãªæŠ•ç¨¿ã®å¼•ç”¨]"

### ğŸ“Š ãƒˆãƒ¬ãƒ³ãƒ‰ç›¸é–¢åˆ†æ
- **é–¢é€£æ€§ã®é«˜ã„æŠ€è¡“çµ„ã¿åˆã‚ã›**: [æŠ€è¡“A Ã— æŠ€è¡“B]
- **æ–°èˆˆãƒˆãƒ¬ãƒ³ãƒ‰**: [åˆå‡ºç¾ã¾ãŸã¯æ€¥ä¸Šæ˜‡ã—ãŸè©±é¡Œ]
- **è¡°é€€ãƒˆãƒ¬ãƒ³ãƒ‰**: [è¨€åŠãŒæ¸›å°‘ã—ãŸè©±é¡Œ]

### ğŸ”® ä»Šå¾Œã®æ³¨ç›®ç‚¹
[ä»Šå¾Œ1-3ãƒ¶æœˆã§é‡è¦ã«ãªã‚Šãã†ãªæŠ€è¡“å‹•å‘]

---
## ãƒ„ã‚¤ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿  
{tweets}`
};
```

### 4. user_insights (ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ†æ)

#### ç›®çš„
å½±éŸ¿åŠ›ã®ã‚ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚„é‡è¦ãªç™ºè¨€è€…ã‚’ç‰¹å®šã—ã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£å†…ã§ã®è©±é¡Œå½¢æˆãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’åˆ†æ

#### ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆ
```javascript
const USER_INSIGHTS_PROMPT = {
    system: `ã‚ãªãŸã¯ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯åˆ†æã®å°‚é–€å®¶ã§ã™ã€‚ãƒ„ã‚¤ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿ã‹ã‚‰å½±éŸ¿åŠ›ã®ã‚ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨é‡è¦ãªç™ºè¨€ã‚’ç‰¹å®šã—ã¦ãã ã•ã„ã€‚
    
åˆ†æè¦³ç‚¹ï¼š
- ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆï¼ˆRTã€ã„ã„ã­ã€ãƒªãƒ—ãƒ©ã‚¤ï¼‰
- ç™ºè¨€ã®å°‚é–€æ€§ãƒ»ä¿¡é ¼æ€§
- ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã¸ã®å½±éŸ¿åŠ›
- æƒ…å ±ã®åˆå‡ºæ€§`,

    template: `ä»¥ä¸‹ã®{count}ä»¶ã®ãƒ„ã‚¤ãƒ¼ãƒˆã‹ã‚‰ã€å½±éŸ¿åŠ›ã®ã‚ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨é‡è¦ãªç™ºè¨€ã‚’åˆ†æã—ã¦ãã ã•ã„ã€‚

## åˆ†æå¯¾è±¡
- æœŸé–“: {dateRange}
- ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°: {userCount}å
- ãƒ„ã‚¤ãƒ¼ãƒˆæ•°: {count}ä»¶

## å‡ºåŠ›å½¢å¼
### ğŸ‘‘ å½±éŸ¿åŠ›ã®ã‚ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆä¸Šä½5åï¼‰

#### 1. @[username]
- **å°‚é–€åˆ†é‡**: [åˆ†é‡å]
- **å½±éŸ¿åŠ›ã‚¹ã‚³ã‚¢**: [é«˜/ä¸­/ä½]
- **æŠ•ç¨¿ç‰¹å¾´**: [æŠ•ç¨¿å†…å®¹ã®ç‰¹å¾´]
- **ä»£è¡¨çš„ç™ºè¨€**: "[é‡è¦ãªæŠ•ç¨¿ã®å¼•ç”¨]"
- **ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆ**: [RTã‚„ã„ã„ã­ã®å‚¾å‘]

### ğŸ’ æ³¨ç›®ã™ã¹ãç™ºè¨€

#### æœ€ã‚‚æ‹¡æ•£ã•ã‚ŒãŸæŠ•ç¨¿
> "[æŠ•ç¨¿å†…å®¹]"
> æŠ•ç¨¿è€…: @[username] | RT: Xå› | ã„ã„ã­: Xå›

#### æœ€ã‚‚è­°è«–ã‚’å‘¼ã‚“ã æŠ•ç¨¿  
> "[æŠ•ç¨¿å†…å®¹]"
> æŠ•ç¨¿è€…: @[username] | ãƒªãƒ—ãƒ©ã‚¤: Xå›

#### æœ€ã‚‚å°‚é–€æ€§ã®é«˜ã„æŠ•ç¨¿
> "[æŠ•ç¨¿å†…å®¹]"  
> æŠ•ç¨¿è€…: @[username] | å°‚é–€æ€§æŒ‡æ¨™: [æ ¹æ‹ ]

### ğŸŒŠ è©±é¡Œå½¢æˆãƒ‘ã‚¿ãƒ¼ãƒ³
- **æƒ…å ±ç™ºä¿¡æº**: [ã©ã®ã‚ˆã†ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ–°ã—ã„è©±é¡Œã‚’ç™ºä¿¡ã™ã‚‹ã‹]
- **æ‹¡æ•£ãƒ‘ã‚¿ãƒ¼ãƒ³**: [ã©ã®ã‚ˆã†ã«è©±é¡ŒãŒåºƒãŒã‚‹ã‹]
- **è­°è«–ã®æ·±åº¦**: [è¡¨é¢çš„ vs å°‚é–€çš„ãªè­°è«–ã®å‰²åˆ]

### ğŸ¯ ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ç‰¹æ€§
[ã“ã®ãƒªã‚¹ãƒˆã®ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®ç‰¹å¾´ã¨å‚¾å‘]

---
## ãƒ„ã‚¤ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿
{tweets}`
};
```

### 5. keyword_extraction (ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æŠ½å‡º)

#### ç›®çš„
ãƒ„ã‚¤ãƒ¼ãƒˆã‹ã‚‰é‡è¦ãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’æŠ½å‡ºã—ã€é »å‡ºåº¦ã¨é‡è¦åº¦ã§åˆ†æ

#### ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆ
```javascript
const KEYWORD_EXTRACTION_PROMPT = {
    system: `ã‚ãªãŸã¯ãƒ†ã‚­ã‚¹ãƒˆãƒã‚¤ãƒ‹ãƒ³ã‚°ã®å°‚é–€å®¶ã§ã™ã€‚æ—¥æœ¬èªãƒ„ã‚¤ãƒ¼ãƒˆã‹ã‚‰æ„å‘³ã®ã‚ã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’æŠ½å‡ºã—ã€ãã®é‡è¦åº¦ã‚’è©•ä¾¡ã—ã¦ãã ã•ã„ã€‚
    
æŠ½å‡ºåŸºæº–ï¼š
- æŠ€è¡“ç”¨èªãƒ»å°‚é–€ç”¨èªã‚’å„ªå…ˆ
- å›ºæœ‰åè©ï¼ˆè£½å“åã€ä¼æ¥­åã€äººåï¼‰
- ãƒˆãƒ¬ãƒ³ãƒ‰ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
- æ„Ÿæƒ…ã‚’è¡¨ã™ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰`,

    template: `ä»¥ä¸‹ã®{count}ä»¶ã®ãƒ„ã‚¤ãƒ¼ãƒˆã‹ã‚‰é‡è¦ãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’æŠ½å‡ºã—ã€åˆ†æã—ã¦ãã ã•ã„ã€‚

## åˆ†æå¯¾è±¡
- æœŸé–“: {dateRange}
- ãƒ„ã‚¤ãƒ¼ãƒˆæ•°: {count}ä»¶
- å¯¾è±¡è¨€èª: æ—¥æœ¬èª

## å‡ºåŠ›å½¢å¼
### ğŸ”¥ é‡è¦ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒ©ãƒ³ã‚­ãƒ³ã‚°

#### æŠ€è¡“ãƒ»è£½å“é–¢é€£ï¼ˆä¸Šä½10ä½ï¼‰
| é †ä½ | ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ | å‡ºç¾æ•° | é‡è¦åº¦ | ã‚«ãƒ†ã‚´ãƒª |
|------|------------|--------|--------|----------|
| 1 | [ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰1] | Xå› | â­â­â­â­â­ | [æŠ€è¡“/è£½å“/ã‚µãƒ¼ãƒ“ã‚¹] |
| 2 | [ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰2] | Xå› | â­â­â­â­ | [æŠ€è¡“/è£½å“/ã‚µãƒ¼ãƒ“ã‚¹] |

#### ä¼æ¥­ãƒ»çµ„ç¹”é–¢é€£ï¼ˆä¸Šä½5ä½ï¼‰
| é †ä½ | ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ | å‡ºç¾æ•° | é–¢é€£ãƒˆãƒ”ãƒƒã‚¯ |
|------|------------|--------|--------------|
| 1 | [ä¼æ¥­å1] | Xå› | [é–¢é€£ã™ã‚‹æŠ€è¡“/ç™ºè¡¨] |

#### æ–°å‡ºç¾ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
- **[ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰]**: [åˆå‡ºç¾ã®æ–‡è„ˆã¨é‡è¦æ€§]
- **[ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰]**: [åˆå‡ºç¾ã®æ–‡è„ˆã¨é‡è¦æ€§]

### ğŸ“Š ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰é–¢é€£æ€§åˆ†æ
#### ã‚ˆãä¸€ç·’ã«ä½¿ã‚ã‚Œã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰çµ„ã¿åˆã‚ã›
- **[ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰A] Ã— [ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰B]**: [é–¢é€£æ€§ã®èª¬æ˜]
- **[ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰C] Ã— [ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰D]**: [é–¢é€£æ€§ã®èª¬æ˜]

### ğŸ”„ æ™‚ç³»åˆ—å¤‰åŒ–
- **ä¸Šæ˜‡ãƒˆãƒ¬ãƒ³ãƒ‰**: [æ€¥æ¿€ã«è¨€åŠãŒå¢—ãˆãŸã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰]
- **ä¸‹é™ãƒˆãƒ¬ãƒ³ãƒ‰**: [è¨€åŠãŒæ¸›ã£ãŸã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰]
- **å®‰å®šãƒˆãƒ¬ãƒ³ãƒ‰**: [ç¶™ç¶šçš„ã«è¨€åŠã•ã‚Œã¦ã„ã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰]

### ğŸ’¡ æ´å¯Ÿ
[ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰åˆ†æã‹ã‚‰èª­ã¿å–ã‚Œã‚‹æ¥­ç•Œå‹•å‘ã‚„æ³¨ç›®ãƒã‚¤ãƒ³ãƒˆ]

---
## ãƒ„ã‚¤ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿
{tweets}`
};
```

---

## ğŸ› ï¸ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå®Ÿè£…è¨­è¨ˆ

### ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚·ã‚¹ãƒ†ãƒ 
```javascript
class PromptTemplateEngine {
    constructor() {
        this.templates = {
            daily_summary: DAILY_SUMMARY_PROMPT,
            sentiment_trend: SENTIMENT_TREND_PROMPT,
            topic_analysis: TOPIC_ANALYSIS_PROMPT,
            user_insights: USER_INSIGHTS_PROMPT,
            keyword_extraction: KEYWORD_EXTRACTION_PROMPT
        };
    }
    
    generatePrompt(analysisType, data) {
        const template = this.templates[analysisType];
        if (!template) {
            throw new Error(`Unknown analysis type: ${analysisType}`);
        }
        
        return {
            system: template.system,
            user: this.interpolateTemplate(template.template, data)
        };
    }
    
    interpolateTemplate(template, data) {
        const { tweets, count, dateRange, listName, userCount } = data;
        
        // ãƒ„ã‚¤ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿ã®æ•´å½¢
        const formattedTweets = tweets.map((tweet, index) => 
            `${index + 1}. @${tweet.authorName}: ${tweet.text}`
        ).join('\n');
        
        // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå¤‰æ•°ã®ç½®æ›
        return template
            .replace(/{count}/g, count)
            .replace(/{dateRange}/g, dateRange)
            .replace(/{listName}/g, listName || 'ä¸æ˜')
            .replace(/{userCount}/g, userCount || tweets.length)
            .replace(/{tweets}/g, formattedTweets);
    }
}
```

### ChatGPT APIå‘¼ã³å‡ºã—è¨­å®š
```javascript
class ChatGPTAnalyzer {
    constructor() {
        this.client = new OpenAI({
            apiKey: process.env.OPENAI_API_KEY
        });
        this.promptEngine = new PromptTemplateEngine();
    }
    
    async analyze(analysisType, tweets, options = {}) {
        const promptData = {
            tweets: tweets,
            count: tweets.length,
            dateRange: this.formatDateRange(tweets),
            listName: options.listName,
            userCount: new Set(tweets.map(t => t.authorName)).size
        };
        
        const prompt = this.promptEngine.generatePrompt(analysisType, promptData);
        
        const config = this.getModelConfig(analysisType);
        
        const response = await this.client.chat.completions.create({
            model: config.model,
            messages: [
                { role: "system", content: prompt.system },
                { role: "user", content: prompt.user }
            ],
            max_tokens: config.maxTokens,
            temperature: config.temperature
        });
        
        return {
            analysisType: analysisType,
            result: response.choices[0].message.content,
            tokensUsed: response.usage.total_tokens,
            model: config.model,
            processingTime: Date.now() - startTime
        };
    }
    
    getModelConfig(analysisType) {
        const configs = {
            daily_summary: {
                model: "gpt-4",
                maxTokens: 1000,
                temperature: 0.3
            },
            sentiment_trend: {
                model: "gpt-4",
                maxTokens: 800,
                temperature: 0.1
            },
            topic_analysis: {
                model: "gpt-4",
                maxTokens: 1200,
                temperature: 0.2
            },
            user_insights: {
                model: "gpt-4",
                maxTokens: 1000,
                temperature: 0.3
            },
            keyword_extraction: {
                model: "gpt-4",
                maxTokens: 800,
                temperature: 0.2
            }
        };
        
        return configs[analysisType] || configs.daily_summary;
    }
    
    formatDateRange(tweets) {
        if (tweets.length === 0) return 'ä¸æ˜';
        
        const dates = tweets.map(t => new Date(t.createdAt)).sort();
        const start = dates[0].toLocaleDateString('ja-JP');
        const end = dates[dates.length - 1].toLocaleDateString('ja-JP');
        
        return start === end ? start : `${start}ã€œ${end}`;
    }
}
```

---

## ğŸ“Š çµæœãƒ‘ãƒ¼ã‚¹ãƒ»ä¿å­˜è¨­è¨ˆ

### åˆ†æçµæœãƒ‘ãƒ¼ã‚µãƒ¼
```javascript
class AnalysisResultParser {
    static parseResult(analysisType, rawResult) {
        switch (analysisType) {
            case 'sentiment_trend':
                return this.parseSentimentResult(rawResult);
            case 'daily_summary':
                return this.parseTextResult(rawResult);
            case 'topic_analysis':
                return this.parseTopicResult(rawResult);
            default:
                return { type: 'text', content: rawResult };
        }
    }
    
    static parseSentimentResult(rawResult) {
        try {
            // JSONéƒ¨åˆ†ã‚’æŠ½å‡º
            const jsonMatch = rawResult.match(/```json\n([\s\S]*?)\n```/);
            if (jsonMatch) {
                const jsonData = JSON.parse(jsonMatch[1]);
                return {
                    type: 'json',
                    content: rawResult,
                    structured: jsonData
                };
            }
        } catch (error) {
            console.warn('JSON parsing failed, treating as text:', error);
        }
        
        return { type: 'text', content: rawResult };
    }
    
    static parseTextResult(rawResult) {
        // Markdownæ§‹é€ ã®æŠ½å‡º
        const sections = this.extractMarkdownSections(rawResult);
        return {
            type: 'markdown',
            content: rawResult,
            sections: sections
        };
    }
    
    static extractMarkdownSections(text) {
        const sections = {};
        const lines = text.split('\n');
        let currentSection = null;
        let currentContent = [];
        
        lines.forEach(line => {
            if (line.startsWith('###')) {
                if (currentSection) {
                    sections[currentSection] = currentContent.join('\n');
                }
                currentSection = line.replace('### ', '').replace(/[ğŸ”¥ğŸ“ŠğŸ’¡ğŸ“ˆ]/g, '').trim();
                currentContent = [];
            } else {
                currentContent.push(line);
            }
        });
        
        if (currentSection) {
            sections[currentSection] = currentContent.join('\n');
        }
        
        return sections;
    }
}
```

---

## ğŸ¯ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå“è³ªå‘ä¸Š

### A/Bãƒ†ã‚¹ãƒˆè¨­è¨ˆ
```javascript
class PromptABTester {
    constructor() {
        this.variants = {
            daily_summary: {
                'v1': DAILY_SUMMARY_PROMPT,
                'v2': DAILY_SUMMARY_PROMPT_V2,
                'v3': DAILY_SUMMARY_PROMPT_V3
            }
        };
        this.currentVariants = {};
    }
    
    async testVariant(analysisType, tweets, variantName) {
        const prompt = this.variants[analysisType][variantName];
        // åˆ†æå®Ÿè¡Œãƒ»çµæœä¿å­˜
        const result = await this.runAnalysis(prompt, tweets);
        
        // å“è³ªãƒ¡ãƒˆãƒªã‚¯ã‚¹è¨ˆç®—
        const metrics = this.calculateQualityMetrics(result);
        
        return { result, metrics, variant: variantName };
    }
    
    calculateQualityMetrics(result) {
        return {
            tokenEfficiency: result.result.length / result.tokensUsed,
            responseTime: result.processingTime,
            structureCompliance: this.checkStructureCompliance(result.result),
            contentRelevance: this.assessContentRelevance(result.result)
        };
    }
}
```

### ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ”¹å–„ãƒ­ã‚°
```markdown
## ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ”¹å–„å±¥æ­´

### v1.0 (åˆæœŸç‰ˆ)
- åŸºæœ¬çš„ãªåˆ†ææ©Ÿèƒ½
- æ—¥æœ¬èªå¯¾å¿œ

### v1.1 (æ§‹é€ åŒ–æ”¹å–„)
- å‡ºåŠ›å½¢å¼ã®çµ±ä¸€
- JSONå½¢å¼ã®å°å…¥

### v1.2 (å“è³ªå‘ä¸Š)
- ã‚ˆã‚Šå…·ä½“çš„ãªæŒ‡ç¤º
- ä¾‹ç¤ºã®è¿½åŠ 

### v2.0 (å°‚é–€æ€§å¼·åŒ–)
- æ¥­ç•ŒçŸ¥è­˜ã®åæ˜ 
- æŠ€è¡“ç”¨èªã®ç²¾åº¦å‘ä¸Š
```

---

*ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯åˆ†æç²¾åº¦å‘ä¸Šã«å¿œã˜ã¦ç¶™ç¶šçš„ã«æ›´æ–°ã•ã‚Œã¾ã™ã€‚*